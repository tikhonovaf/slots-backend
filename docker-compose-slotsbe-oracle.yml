version: '3.8'

services:
  slotsbe:
    image: slotsbe:latest   # –∏–º—è —Ç–≤–æ–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
    container_name: slotsbe
    ports:
      - "8081:8081"         # –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞, –µ—Å–ª–∏ —Ç–≤–æ–π Spring Boot —Å–ª—É—à–∞–µ—Ç 8080
    environment:
      JAVA_OPTS: "-Xms1024m -Xmx1024m"
      # üóÑÔ∏è Datasource
      DB_URL: jdbc:oracle:thin:@//oracle-xe:1521/XEPDB1
      DB_USERNAME: SLOTUSER
      DB_PASSWORD: SLOTUSER
      DB_DRIVER: oracle.jdbc.OracleDriver

      # üìß Email
      MAIL_HOST: smtp.yandex.ru
      MAIL_PORT: 465
      MAIL_USERNAME: tikhonovafZel@yandex.ru
      MAIL_PASSWORD: lrvbtcwgqqmfupgp
    depends_on:
      - oracle-xe
#    command: ["./wait-for-it.sh", "oracle-xe:1521", "--", "java", "-jar", "app.jar"]

    restart: unless-stopped
  oracle-xe:
    image: container-registry.oracle.com/database/express:21.3.0-xe
    container_name: oracle-xe
    ports:
      - "1521:1521"
    environment:
      ORACLE_PASSWORD: welcome123
    volumes:
      - oracle-data:/opt/oracle/oradata
      - ./init:/opt/oracle/scripts/startup
    restart: unless-stopped

volumes:
  oracle-data: